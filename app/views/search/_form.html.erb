<%= form_with(url: search_path, method: :post, class: "w-60", data: {
  controller: "search",
  action: "keyup->search#suggestions",
  suggestions_url: search_suggestions_path,

}) do |form| %>

<div class="relative">
  <%= form.text_field :query, data: {
    search_target: "input",
    action: "blur->search#hideSuggestions",
  },
  class: "w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 placeholder-gray-500 text-sm focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500", 
  placeholder: "Search articles...", autocomplete: "off" %>
  
  <div class="absolute inset-y-0 right-0 flex items-center">
    <button type="submit" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">
      Search
    </button>
  </div>

  <div id="suggestions" 
    class="absolute w-full mt-2 bg-white rounded-lg shadow-lg"
    data-search-target="suggestions" data-action="mousedown->search#childClicked">
    <%= render partial: "search/suggestions", locals: {results: results} %>
  </div>

</div>

<%end%>




<div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
  <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M10 14h16" />
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M10 18h16" />
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M10 6h16" />
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M8 10h.01" />
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M8 14h.01" />
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M8 18h.01" />
  </svg>
</div>